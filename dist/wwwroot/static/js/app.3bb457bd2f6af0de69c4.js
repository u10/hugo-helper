webpackJsonp([2,0],[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}n(44);var i=n(19),s=o(i),r=n(127),a=o(r);n(39);var l=n(135),d=o(l);s["default"].use(d["default"]);var u=new d["default"];u.start(a["default"],"app");var c=/(?:\?|&)lang=(\w+)(?:$|&)/.exec(window.location.search);c=c?c[1]:"chs",s["default"].config.lang=c},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var i=n(19),s=o(i),r=n(126),a=o(r),l=n(41),d=o(l),u=n(40),c=o(u);s["default"].use(a["default"]),s["default"].locale("en",d["default"]),s["default"].locale("chs",c["default"])},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={UI:{},Error:{}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={UI:{},Error:{}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),s=o(i),r=n(80);t["default"]={ls:function(e,t,n){s["default"].ajax({url:"/cli/dir/"+encodeURIComponent("list -p "+e+" -d 32")}).done(function(e){t(e.data)}).error(n)},mkDir:function(e,t,n){},cat:function(e,t,n){s["default"].ajax({url:"/cli/file/"+encodeURIComponent("get -p "+e)}).done(function(e){t(e.data)}).error(n)},save:function(e,t,n,o){s["default"].ajax({url:"/cli/file/"+encodeURIComponent("set -p "+e+" -d "+r.Base64.encode(t))}).done(n).error(o)},mv:function(e,t,n,o){s["default"].ajax({url:"/cli/file/"+encodeURIComponent("rename -p "+e+" -d "+t)}).done(n).error(o)},rm:function(e,t,n){s["default"].ajax({url:"/cli/file/"+encodeURIComponent("del -p "+e)}).done(t).error(n)}}},function(e,t){"use strict";function n(e){return"/static/img/fileTypes/"+e+".png"}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={"default":{icon:n("unknown"),valid_children:["default","file"]},".":{icon:"",valid_children:["default","file"]},".txt":{icon:n("txt")},".log":{icon:n("txt")},".toml":{icon:n("conf")},".html":{icon:n("html")},".htm":{icon:n("html")},".json":{icon:n("json")},".js":{icon:n("js")},".css":{icon:n("css")},".md":{icon:n("md")},".zip":{icon:n("zip")}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var i=n(7),s=o(i),r=function(e,t,n){s["default"].isUndefined(e[t])&&(e[t]=n)};r(Date.prototype,"format",function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(""+this.getFullYear()).substr(4-RegExp.$1.length)));for(var n in t){var o=t[n];new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?o:("00"+o).substr((""+o).length)))}return e})},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e,t){var n=arguments;e.template||e.component?!function(){var o=void 0;e.text='<div style="height: '+(e.contentHeight||0)+'px"></div>',e.html=!0;var i=t;t=function(e){return e!==!1?void i(o.$data):(i(e),void o.destroy())},n[1]=t,s["default"].apply(null,n);var r=e.component;if(r?(r.el=l,r.replace=!1,e.data&&(r.data=e.data),o=new a["default"](r)):o=new a["default"]({el:l,replace:!1,template:""+e.template,data:e.data}),e.contentHeight){var d=o.$el.children[0];d.style.maxHeight=e.contentHeight+"px",d.style.overflow="auto"}}():s["default"].apply(null,arguments)};var i=n(114),s=o(i);n(70);var r=n(19),a=o(r),l=".sweet-alert p"},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return{addConsoleListener:function(t){e.on("hugo.console",t)},removeConsoleListener:function(t){e.off("hugo.console",t)},start:function(t){e.emit("hugo.start",t)},restart:function(t){e.emit("hugo.restart",t)},stop:function(){e.emit("hugo.stop")}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t={};return{open:function(n,o){t[n.id]=o,e.on("term.data",o),e.emit("term.open",n)},exec:function(t){e.emit("term.exec",t)},"break":function(){e.emit("term.break")},close:function(n){e.emit("term.close",n);var o=t[n];o&&(e.off("term.data",o),delete t[n])}}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.term=t.hugo=void 0;var i=n(82),s=o(i),r=n(47),a=o(r),l=n(46),d=o(l),u=(0,s["default"])("ws://"+window.location.host,{autoConnect:!1});u.connect();t.hugo=(0,d["default"])(u),t.term=(0,a["default"])(u)},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){var n=a["default"].clone(e);for(var o in t)a["default"].isFunction(t[o])?n[o]=t[o]:n[o]=a["default"].extend(n[o],t[o]);return n}function s(e){var t=e.original;return{open:{label:"查看",_disabled:"."===t.type},add:{label:"新建"},rename:{label:"重命名"},del:{label:"删除"}}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),a=o(r),l=n(48),d=n(43),u=o(d),c=n(42),f=o(c),p=n(134),h=o(p),v=n(128),m=o(v),x=n(130),g=o(x),_=n(133),y=o(_),b=n(131),M=o(b),j=n(129),w=o(j),$=n(132),k=o($),C=n(45),E=o(C);n(62),n(60),n(69),n(22),n(65),n(64),n(68);var O=i(m["default"],{methods:{getConfig:function(){return{lineNumbers:!0,extraKeys:{"Alt-F":"findPersistent"},highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0}}}}}),T=i(g["default"],{methods:{doSave:function(e){f["default"].save(e.path,e.draft,function(){e.content=e.draft,e.draft=null,console.log("save done!")},function(){console.log("save failed!")})},getComponentType:function(e){return/\.(html|htm|xml|json|js|css|md|toml)$/i.test(e)?"CodeMirror":void 0},getContent:function(e,t){a["default"].isUndefined(this.getComponentType(e))?t(""):f["default"].cat(e,t)}},components:{CodeMirror:O}}),P=i(y["default"],{methods:{menuClick:function(e){var t=this;switch(e.action){case"open":this.$dispatch("cmd-file-open",e.jstree.get_path(e.node).join("/"));break;case"add":(0,E["default"])({title:"新建文件",text:"请输入文件名:",type:"input",inputType:"text",showCancelButton:!0,closeOnConfirm:!1},function(n){n!==!1&&!function(){var o=e.jstree.get_path(e.node);o.push(n);var i=o.join("/");f["default"].save(i,"",function(){(0,E["default"])("创建成功","文件创建成功!","success"),t.$dispatch("cmd-file-open",i),t.$dispatch("cmd-refresh-tree")},function(){E["default"].showInputError("创建文件失败.")})}()});break;case"rename":var n=function(){var n=e.jstree.get_path(e.node),o=n.pop(),i=n.join("/");return(0,E["default"])({title:"文件名重命名",text:"请输入新的文件名:",type:"input",inputType:"text",inputValue:o,showCancelButton:!0,closeOnConfirm:!1},function(e){e!==!1&&!function(){var n=i+"/"+o,s=i+"/"+e;f["default"].mv(n,s,function(){(0,E["default"])("重命名成功","文件重命名成功!","success"),t.$dispatch("cmd-file-rename",n,s),t.$dispatch("cmd-refresh-tree")},function(){E["default"].showInputError("重命名文件失败.")})}()}),"break"}();if("break"===n)break;case"del":var o=function(){var n=e.jstree.get_path(e.node),o=n.join("/");return(0,E["default"])({title:"删除文件",text:"确定要删除如下文件吗(无法恢复):\n"+o,type:"warning",showCancelButton:!0,closeOnConfirm:!1},function(){f["default"].rm(o,function(){(0,E["default"])("删除成功","文件删除成功!","success"),t.$dispatch("cmd-file-close",o),t.$dispatch("cmd-refresh-tree")},function(){(0,E["default"])("删除成功","文件删除失败!","error")})}),"break"}();if("break"===o)break}},itemDblClick:function(e){var t=e.data;"."!==t.type&&this.$dispatch("cmd-file-open",e.jstree.get_path(e.node).join("/"))},getConfig:function(){var e=this;return{contextmenu:{items:function(t,n){var o=s(t),i=function(n){var i=o[n];i.action=function(){e.menuClick({action:n,data:t.original,node:t,jstree:e.jstree})}};for(var r in o)i(r);return o}},sort:function(e,t){return e=this.get_node(e),t=this.get_node(t),e="."===e.original.type?"\x00"+e.text:e.text,t="."===t.original.type?"\x00"+t.text:t.text,e>t?1:-1},types:u["default"],plugins:["search","contextmenu","sort","types"]}}}}),S=i(M["default"],{data:function(){return{menus:[{name:"文件",items:{create_site:{name:"新建站点"},open_site:{name:"打开站点"}}},{name:"编辑",items:{undo:{name:"撤销"},redo:{name:"重做"},"-0":"-",save:{name:"保存"}}},{name:"hugo",items:{start:{name:"启动"},restart:{name:"重启"},stop:{name:"停止"}}},{name:"帮助",items:{about:{name:"关于"}}}]}},methods:{menuClick:function(e){switch(e){case"start":l.hugo.start({theme:"hugo-vaniship-theme"});break;case"restart":l.hugo.restart();break;case"stop":l.hugo.stop();break;case"undo":this.getEditor().undo();break;case"redo":this.getEditor().redo();break;case"save":this.getEditor().save();break;case"about":(0,E["default"])("Hugo Helper","MIT License\nv0.0.1")}console.log(e)}}});t["default"]={data:function(){return{rightView:"",projectPath:"."}},methods:{refreshTree:function(e){e&&e!==this.projectPath&&(this.projectPath=e);var t=this;f["default"].ls(this.projectPath,function(e){t.$refs.treeView.refresh(e)})},getEditor:function(){return this.$refs.rightView}},ready:function(){this.refreshTree();var e=this;l.hugo.addConsoleListener(function(t){e.$broadcast("console-hugo",t)}),this.$on("cmd-file-open",function(t){e.rightView="EditorManager",this.$nextTick(function(){e.getEditor().open(t)})}),this.$on("cmd-file-close",function(t){e.rightView="EditorManager",this.$nextTick(function(){e.getEditor().close(t)})}),this.$on("cmd-file-rename",function(t,n){e.rightView="EditorManager",this.$nextTick(function(){e.getEditor().rename(t,n)})}),this.$on("cmd-file-save",function(){e.getEditor().save()}),this.$on("cmd-refresh-tree",function(){e.refreshTree()})},components:{XFrame:h["default"],Menu:S,Tree:P,EditorManager:T,Console:w["default"],State:k["default"]}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),s=o(i),r=n(1),a=o(r),l={lineNumbers:!0};t["default"]={ready:function(){var e=this,t=this.codemirror=a["default"].fromTextArea(this.$els.codemirror,s["default"].defaults(this.getConfig(),l));t.on("change",function(t){e.data&&(e.data.draft=t.getValue())}),t.on("scroll",function(t){e.data&&(e.data.cursor=s["default"].extend(e.data.cursor||{},t.getScrollInfo()))}),t.on("blur",function(t){e.data&&0!==t.getCursor()&&(e.data.cursor=s["default"].extend(e.data.cursor||{},t.getCursor()),e.data.history=t.getHistory())}),this.reload(),this.setMode()},activate:function(e){e(),this.focus()},methods:{undo:function(){this.codemirror.undo()},redo:function(){this.codemirror.redo()},reload:function(){var e=this.data,t=this.codemirror,n=e.draft||e.content;if(t.getValue()!==n){var o=e.cursor||{left:0,top:0,line:0,ch:0};t.setValue(n),t.scrollTo(o.left,o.top),t.setCursor(o),e.history?t.setHistory(e.history):t.clearHistory()}},getMode:function(e){var t=null;return s["default"].isFunction(a["default"].findModeByFileName)&&(t=(a["default"].findModeByFileName(e)||{mode:null}).mode),t},setMode:function(e){this.codemirror.setOption("mode",e||this.getMode(this.data.path))},focus:function(){this.codemirror&&this.codemirror.focus()},save:function(){this.data&&this.data.content!==this.data.draft&&this.$dispatch("save",this.data)},onSave:function(e){(e.ctrlKey||e.metaKey)&&(e.preventDefault(),e.stopPropagation(),this.save())}},props:{data:Object},watch:{"data.path":function(){this.setMode()},"data.content":function(){this.reload()}}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),s=o(i);t["default"]={data:function(){return{cmd:""}},props:{id:String},ready:function(){var e=(0,s["default"])(this.$els.content),t=(0,s["default"])(this.$els.container);this.$on("console-"+this.id,function(n){e.append(n),t.scrollTop(Number.MAX_VALUE)})},methods:{sendCommand:function(){this.$dispatch("exec-command",{id:this.id,cmd:this.cmd})}}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){var n=void 0;return d["default"].isNumber(t)?n=t:d["default"].isString(t)?n=d["default"].findIndex(e,function(e){return e.path===t}):d["default"].isObject(t)&&(n=d["default"].indexOf(e,t)),n}function s(e){var t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return-1===t?e:e.substr(t+1)}function r(e){return'<div style="height: 100%; display: flex; align-items: center"><p style="width: 100%;text-align: center;color: grey">'+e+"</p></div>"}function a(){var e=Array.prototype.slice.call(arguments),t=e[0],n=e[1],o=e.slice(2);n&&d["default"].isString(t)&&(t=n[t]),d["default"].isFunction(t)&&t.apply(n,o)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(7),d=o(l);t["default"]={data:function(){return{editors:[],selected:-1}},ready:function(){var e=this;this.$on("save",function(t){a("doSave",e,t)})},computed:{currentView:function(){return 0===this.editors.length?"Empty":this.getComponentType(this.editors[this.selected].path)}},methods:{getComponentType:function(){},switchTo:function(e){var t=i(this.editors,e);return-1===t?!1:(this.selected=t,this.focus(),!0)},undo:function(){a("undo",this.$refs.content)},redo:function(){a("redo",this.$refs.content)},open:function(e){if(!this.switchTo(e)){var t=this;this.getContent(e,function(n){t.editors.push({path:e,content:n,draft:null}),t.selected=t.editors.length-1,t.focus()})}},rename:function(e,t){var n=i(this.editors,e);n>=0&&(this.editors[n].path=t)},close:function(e){var t=i(this.editors,e||this.selected);t>=0&&(this.editors.splice(t,1),this.selected===this.editors.length&&(this.selected=this.editors.length-1),this.focus())},save:function(){a("save",this.$refs.content)},focus:function(){a("focus",this.$refs.content)}},components:{Default:{template:r("Unknown File.")},Empty:{template:r("No File Opened.")}},filters:{filename:function(e){return s(e)}}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),s=o(i);n(79),t["default"]={ready:function(){var e=this;s["default"].contextMenu({selector:".top-menu-item",trigger:"left",appendTo:this.$el,position:function(e,t,n){var o=e.$trigger;e.$menu.css({top:o.offset().top+o.height(),left:o.offset().left-5})},build:function(t,n){return{callback:function(t,n){e.menuClick(t,n)},items:e.menus[t.data("index")].items}}})}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(){var e=Array.prototype.slice.call(arguments),t=e[0],n=e[1],o=e.slice(2);n&&r["default"].isString(t)&&(t=n[t]),r["default"].isFunction(t)&&t.apply(n,o)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(7),r=o(s),a=n(4),l=o(a);n(81),t["default"]={props:{data:Array,menu:Function},data:function(){return{keyword:""}},ready:function(){var e=this,t=this.jstree=(0,l["default"])(this.$els.jstree).on("activate_node.jstree",function(n,o){var s=o.node;i("itemClick",e,{srcEvt:n,data:s.original,node:s,jstree:t})}).on("select_node.jstree",function(n,o){var s=o.node;i("itemSelect",e,{srcEvt:n,data:s.original,node:s,jstree:t})}).on("dblclick.jstree",function(n){var o=e.jstree.get_node(n.target);i("itemDblClick",e,{srcEvt:n,data:o.original,node:o,jstree:t})}).jstree(r["default"].extend({core:{data:this.data}},this.getConfig())).jstree()},methods:{getConfig:function(){},refresh:function(e){this.data=e}},watch:{keyword:function(e){r["default"].isFunction(this.jstree.search)&&this.jstree.search(e)},data:function(e){this.jstree.settings.core.data=e,this.jstree.refresh(!0)}}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(109),s=o(i);t["default"]={props:{gutterSize:Number},components:{},ready:function(){(0,s["default"])([this.$els.top,this.$els.bottom],{sizes:[80,20],direction:"vertical",gutterSize:this.gutterSize,cursor:"row-resize"}),(0,s["default"])([this.$els.topLeft,this.$els.topRight],{sizes:[25,75],gutterSize:this.gutterSize,cursor:"col-resize"})}}},,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports="<x-frame :gutter-size=5> <menu slot=menu></menu> <tree class=border slot=left v-ref:tree-view></tree> <component slot=right :is=rightView v-ref:right-view></component> <console slot=bottom :id=\"'hugo'\"></console> <state slot=state></state> </x-frame>"},function(e,t){e.exports="<div style=height:100% @keydown.s=onSave> <textarea v-el:codemirror></textarea> </div>"},function(e,t){e.exports='<div class="flex v-flex fill"> <div handle=.drag-handle style="overflow-x: scroll"> <div v-for="editor in editors" class=drag-handle> <div @click=switchTo($index) :class="(selected===$index)?\'tab tab-selected\':\'tab\'"> {{editor.path | filename}} <span v-if="editor.draft !== null && (editor.draft !== editor.content)">*</span> <span class=btn-close @click=close($index)>X</span> </div> </div> </div> <div class=flex-box> <div class="flex-ctrl margin-s"> <div class=flex-content> <component :is="currentView || \'Default\'" :data=editors[selected] v-ref:content></component> </div> </div> </div> </div>'},function(e,t){e.exports='<div class=menu-container> <div v-for="menu in menus" class=top-menu-item style="display: inline-block" :data-index=$index>{{menu.name}}</div> </div>'},function(e,t){e.exports="State"},function(e,t){e.exports='<div class="flex v-flex fill"> <div class=flex> <div style="padding: 2px">搜索</div> <input style="-webkit-flex: 1;min-width: 30px" v-model=keyword /> </div> <div class=flex-box> <div class="flex-ctrl margin-s"> <div class=flex-content> <div v-el:jstree></div> </div> </div> </div> </div>'},function(e,t){e.exports='<div class="flex v-flex fill"> <slot name=menu></slot> <div class=flex-box> <div class=flex-ctrl> <div class=flex-content> <div v-el:top class="top split"> <div v-el:top-left class="split split-horizontal"> <div class="flex-box v-flex"> <div class="flex-ctrl margin-s"> <div class=flex-content> <slot name=left></slot> </div> </div> </div> </div> <div v-el:top-right class="split split-horizontal"> <div class="flex-box v-flex"> <div class=flex-ctrl> <div class=flex-content> <slot name=right></slot> </div> </div> </div> </div> </div> <div v-el:bottom class=split> <div class="flex v-flex fill"> <div class=flex-box> <div class="flex-ctrl margin-s"> <div class=flex-content> <slot name=bottom></slot> </div> </div> </div> </div> </div> </div> </div> </div> <slot name=state></slot> </div>'},function(e,t){e.exports='<div class="flex v-flex fill" _v-79897438=""> <div class=flex-box _v-79897438=""> <div class=flex-ctrl style="border: 1px lightgray solid" _v-79897438=""> <div v-el:container="" class="flex-content console" _v-79897438=""> <pre v-el:content="" _v-79897438=""></pre> </div> </div> </div> </div>'},,function(e,t,n){var o,i;n(71),o=n(49),i=n(118),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},function(e,t,n){var o,i;n(72),o=n(50),i=n(119),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},function(e,t,n){var o,i;n(78),o=n(51),i=n(125),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},function(e,t,n){var o,i;n(73),o=n(52),i=n(120),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},function(e,t,n){var o,i;n(74),o=n(53),i=n(121),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},function(e,t,n){var o,i;n(75),o=n(54),i=n(122),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},function(e,t,n){var o,i;n(76),o=n(55),i=n(123),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},function(e,t,n){var o,i;n(77),o=n(56),i=n(124),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},,,,,,function(e,t){}]);