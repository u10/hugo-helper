webpackJsonp([2,0],[function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}o(52);var i=o(21),s=n(i),r=o(155),a=n(r);o(49);var l=o(165),d=n(l),u=o(158),c=n(u);s["default"].use(d["default"]);var f=new d["default"]({"abstract":!1});f.map({"/":{component:{template:"<p>Default</p>"}},"/editor":{name:"editor",component:c["default"]}}),f.beforeEach(function(e){e.next()}),f.start(a["default"],"app");var p=/(?:\?|&)lang=(\w+)(?:$|&)/.exec(window.location.search);p=p?p[1]:"chs",s["default"].config.lang=p},,,,,,,,,,,,,,,,,,,,,,,function(e,t,o){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t["default"]=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.setSelectedEditor=t.closeFile=t.openFile=t.setExplorerData=void 0;var i=o(25),s=n(i);t.setExplorerData=function(e,t){var o=e.dispatch;o(s.SET_EXPLORER_DATA,t)},t.openFile=function(e,t){var o=e.dispatch;o(s.OPEN_FILE,t)},t.closeFile=function(e,t){var o=e.dispatch;o(s.CLOSE_FILE,t)},t.setSelectedEditor=function(e,t){var o=e.dispatch;o(s.SET_SELECTED_EDITOR,t)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.window=function(e){return e.window},t.editor=function(e){return e.window.editor}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SET_EXPLORER_DATA="SET_EXPLORER_DATA",t.OPEN_FILE="OPEN_FILE",t.CLOSE_FILE="CLOSE_FILE",t.SET_SELECTED_EDITOR="SET_SELECTED_EDITOR"},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=o(21),s=n(i),r=o(154),a=n(r),l=o(51),d=n(l),u=o(50),c=n(u);s["default"].use(a["default"]),s["default"].locale("en",d["default"]),s["default"].locale("chs",c["default"])},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={UI:{},Error:{}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={UI:{},Error:{}}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var i=o(10),s=n(i),r=function(e,t,o){s["default"].isUndefined(e[t])&&(e[t]=o)};r(Date.prototype,"format",function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(""+this.getFullYear()).substr(4-RegExp.$1.length)));for(var o in t){var n=t[o];new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?n:("00"+n).substr((""+n).length)))}return e})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){return{addConsoleListener:function(t){e.on("hugo.console",t)},removeConsoleListener:function(t){e.off("hugo.console",t)},start:function(t){e.emit("hugo.start",t)},restart:function(t){e.emit("hugo.restart",t)},stop:function(){e.emit("hugo.stop")}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t={};return{open:function(o,n){t[o.id]=n,e.on("term.data",n),e.emit("term.open",o)},exec:function(t){e.emit("term.exec",t)},"break":function(){e.emit("term.break")},close:function(o){e.emit("term.close",o);var n=t[o];n&&(e.off("term.data",n),delete t[o])}}}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.term=t.hugo=void 0;var i=o(108),s=n(i),r=o(54),a=n(r),l=o(53),d=n(l),u=(0,s["default"])("ws://"+window.location.host,{autoConnect:!1});u.connect();t.hugo=(0,d["default"])(u),t.term=(0,a["default"])(u)},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i,s=o(69),r=n(s),a=o(10),l=n(a),d=o(21),u=n(d),c=o(166),f=n(c),p=o(25);u["default"].use(f["default"]);var v={status:{visible:!0,data:[]},window:{explorer:{visible:!0,data:[]},editor:{visible:!0,selected:[0],data:[]},ret:{title:"test",path:"fake/path",content:"Hello World!"}}},h=(i={},(0,r["default"])(i,p.SET_EXPLORER_DATA,function(e,t){e.window.explorer.data=t}),(0,r["default"])(i,p.OPEN_FILE,function(e,t){var o=e.window.editor,n=l["default"].findIndex(o.data,function(e){return e.path===t.path});-1===n&&(o.data.push(t),n=o.data.length-1),o.selected.$set(0,n)}),(0,r["default"])(i,p.CLOSE_FILE,function(e,t){var o=e.window.editor;o.data.splice(t,1),o.selected[0]>o.data.length-1&&o.selected.$set(0,Math.max(0,o.data.length-1))}),(0,r["default"])(i,p.SET_SELECTED_EDITOR,function(e,t){e.window.editor.selected.$set(0,t)}),i);t["default"]=new f["default"].Store({state:v,mutations:h})},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(55),s=o(56),r=n(s),a=o(24),l=o(23),d=o(4),u=n(d),c=o(164),f=n(c),p=o(160),v=n(p),h=o(157),x=n(h),m=o(161),_=n(m),g=o(162),b=n(g),y=o(106),E=o(140),w=n(E);t["default"]={store:r["default"],vuex:{getters:{window:a.window},actions:{setExplorerData:l.setExplorerData}},data:function(){return{mainMenu:[{name:"文件",items:{"new":{name:"新建"},open:{name:"打开"}}},{name:"编辑",items:{undo:{name:"撤销"},redo:{name:"重做"},"-0":"-",save:{name:"保存"}}},{name:"hugo",items:{start:{name:"启动"},restart:{name:"重启"},stop:{name:"停止"}}},{name:"帮助",items:{about:{name:"关于"}}}],treeMenu:{data:function e(t){var e=t.original;return{get:{label:"查看",_disabled:"+"===e.type},add:{label:"新建"},rename:{label:"重命名"},del:{label:"删除"}}}}}},computed:{},methods:{onSave:function(e){u["default"].ajax({url:"/cli/file/"+encodeURIComponent("set -p "+e.path+" -d "+y.Base64.encode(e.draft)),complete:function(t,o){"success"===o?(e.content=e.draft,e.draft=null,console.log("save done!")):console.log("save failed")}})},treeMenuClick:function(e){var t=this;switch(e.action){case"add":(0,w["default"])({title:"新建文件",text:"请输入文件名:",type:"input",inputType:"text",showCancelButton:!0,closeOnConfirm:!1},function(o){o!==!1&&!function(){var n=e.jstree.get_path(e.node),i=n.join("/");u["default"].ajax({url:"/cli/file/"+encodeURIComponent("add -p "+i+"/"+o)}).done(function(e){(0,w["default"])("创建成功","文件创建成功!","success"),t.$router.replace({name:"editor",query:{title:o,path:i+"/"+o}}),t.refreshTree()}).error(function(e){w["default"].showInputError("创建文件失败.")})}()});break;case"rename":var o=function(){var o=e.jstree.get_path(e.node),n=o.pop(),i=o.join("/");return(0,w["default"])({title:"文件名重命名",text:"请输入新的文件名:",type:"input",inputType:"text",inputValue:n,showCancelButton:!0,closeOnConfirm:!1},function(e){e!==!1&&u["default"].ajax({url:"/cli/file/"+encodeURIComponent("rename -p "+i+"/"+n+" -d "+i+"/"+e)}).done(function(e){(0,w["default"])("重命名成功","文件重命名成功!","success"),t.refreshTree()}).error(function(e){w["default"].showInputError("重命名文件失败.")})}),"break"}();if("break"===o)break;case"del":var n=function(){var o=e.jstree.get_path(e.node),n=o.join("/");return(0,w["default"])({title:"删除文件",text:"确定要删除如下文件吗(无法恢复):\n"+n,type:"warning",showCancelButton:!0,closeOnConfirm:!1},function(){u["default"].ajax({url:"/cli/file/"+encodeURIComponent("del -p "+n)}).done(function(e){(0,w["default"])("删除成功","文件删除成功!","success"),t.$broadcast("cmd-close",n),t.refreshTree()}).error(function(e){(0,w["default"])("删除成功","文件删除失败!","error")})}),"break"}();if("break"===n)break}},mainMenuClick:function(e){switch(e){case"start":i.hugo.start({theme:"hugo-vaniship-theme"});break;case"restart":i.hugo.restart();break;case"stop":i.hugo.stop();break;case"undo":this.$broadcast("cmd-undo");break;case"redo":this.$broadcast("cmd-redo");break;case"save":this.$broadcast("cmd-save");break;case"about":(0,w["default"])("Hugo Helper","MIT License\nv0.0.1")}console.log(e)},treeItemDblClick:function(e){var t=e.data;if("+"!==t.type){var o=e.jstree.get_path(e.node),n=o.join("/");this.$router.replace({name:"editor",query:{title:t.text,path:n}})}},refreshTree:function(){var e=this;u["default"].ajax({url:"/cli/dir/"+encodeURIComponent("list -d 2"),success:function(t){e.setExplorerData(t.data)}})}},watch:{},ready:function(){this.refreshTree();var e=this;i.hugo.addConsoleListener(function(t){e.$broadcast("console-hugo",t)})},components:{XFrame:f["default"],Menu:v["default"],Console:x["default"],State:_["default"],Tree:b["default"]}}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(10),s=n(i),r=o(1),a=n(r);o(87),o(85),o(94),o(32),o(90),o(89),o(93),t["default"]={ready:function(){var e=this,t=this.codemirror=a["default"].fromTextArea(this.$els.codemirror,{lineNumbers:!0,extraKeys:{"Alt-F":"findPersistent"},highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0}});t.on("change",function(t){e.data&&(e.data.draft=t.getValue())}),t.on("scroll",function(t){e.data&&(e.data.cursor=s["default"].extend(e.data.cursor||{},t.getScrollInfo()))}),t.on("blur",function(t){e.data&&0!==t.getCursor()&&(e.data.cursor=s["default"].extend(e.data.cursor||{},t.getCursor()),e.data.history=t.getHistory())}),this.$on("cmd-undo",function(){t.undo()}),this.$on("cmd-redo",function(){t.redo()}),this.$on("cmd-save",function(){e.save()}),this.reload(),this.setMode()},activate:function(e){e(),this.focus()},methods:{reload:function(){var e=this.data,t=this.codemirror,o=e.draft||e.content;if(t.getValue()!==o){var n=e.cursor||{left:0,top:0,line:0,ch:0};t.setValue(o),t.scrollTo(n.left,n.top),t.setCursor(n),e.history?t.setHistory(e.history):t.clearHistory()}},setMode:function(e){e=e||(a["default"].findModeByFileName(this.data.title)||{mode:null}).mode,console.log(e),this.codemirror.setOption("mode",e)},focus:function(){this.codemirror&&this.codemirror.focus()},save:function(){this.data&&this.data.content!==this.data.draft&&this.$dispatch("save",this.data)},onSave:function(e){(e.ctrlKey||e.metaKey)&&(e.preventDefault(),e.stopPropagation(),this.save())}},props:{data:Object},watch:{"data.title":function(){this.setMode()},"data.content":function(){this.reload()}}}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(4),s=n(i);t["default"]={data:function(){return{cmd:""}},props:{id:String},ready:function(){var e=(0,s["default"])(this.$els.content),t=(0,s["default"])(this.$els.container);this.$on("console-"+this.id,function(o){e.append(o),t.scrollTop(Number.MAX_VALUE)})},methods:{sendCommand:function(){this.$dispatch("exec-command",{id:this.id,cmd:this.cmd})}}}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(e){var t=e.title;return/\.(html|htm|json|js|css|md|toml)$/i.test(t)?"CodeMirror":"UnknownFile"}return"Empty"}Object.defineProperty(t,"__esModule",{value:!0});var s=o(4),r=n(s),a=o(10),l=n(a),d=o(156),u=n(d),c=o(163),f=n(c),p=o(159),v=n(p),h=o(24),x=o(23);t["default"]={route:{data:function(){this.$route.query.path&&this.open({title:this.$route.query.title,path:this.$route.query.path}),this.$router.replace({name:"editor"})}},vuex:{getters:{editor:h.editor},actions:{setSelectedEditor:x.setSelectedEditor,openFile:x.openFile,closeFile:x.closeFile}},ready:function(){var e=this;this.$on("cmd-close",function(t){e.close(t)})},computed:{currentView:function(){return i(this.editor.data[this.editor.selected[0]])}},methods:{isChange:function(e){return null!==e.draft&&e.draft!==e.content},switchTo:function(e){this.setSelectedEditor(e),this.focus()},close:function(e){l["default"].isUndefined(e)?e=this.editor.data[this.editor.selected[0]]:l["default"].isString(e)&&(e=l["default"].findIndex(this.editor.data,function(t){return t.path===e})),e>=0&&(this.closeFile(e),this.focus())},open:function(e){var t=this,o=i(e);"UnknownFile"!==o?!function(){var o=t;r["default"].ajax({url:"/cli/file/"+encodeURIComponent("get -p "+e.path),success:function(t){o.openFile({title:e.title,path:e.path,content:t.data,draft:null})}})}():this.openFile({title:e.title,path:e.path})},focus:function(){this.$refs.content.focus()}},components:{CodeMirror:u["default"],UnknownFile:f["default"],Empty:v["default"]}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(67),s=n(i),r=o(4),a=n(r);o(105),t["default"]={props:{model:Array},ready:function(){var e=this;a["default"].contextMenu({selector:".top-menu-item",trigger:"left",appendTo:this.$el,zIndex:s["default"],position:function(e,t,o){var n=e.$trigger;e.$menu.css({top:n.offset().top+n.height(),left:n.offset().left-5})},events:{show:function(e){e.$trigger.addClass("top-menu-item-hover")},hide:function(e){e.$trigger.removeClass("top-menu-item-hover")}},build:function(t,o){return{callback:function(t,o){e.$dispatch("menu-click",t,o)},items:e.model[t.data("index")].items}}})}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{}}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(4),s=n(i);o(107),t["default"]={props:{data:Array,menu:Function},data:function(){return{keyword:""}},ready:function(){var e=this,t=this.jstree=(0,s["default"])(this.$els.jstree).on("activate_node.jstree",function(o,n){var i=n.node;e.$dispatch("item-click",{srcEvt:o,data:i.original,node:i,jstree:t})}).on("select_node.jstree",function(o,n){var i=n.node;e.$dispatch("item-select",{srcEvt:o,data:i.original,node:i,jstree:t})}).on("dblclick.jstree",function(o){var n=e.jstree.get_node(o.target);e.$dispatch("item-dblclick",{srcEvt:o,data:n.original,node:n,jstree:t})}).jstree({core:{data:this.data},contextmenu:{items:function(o,n){var i=e.menu(o),s=function(n){var s=i[n];s.action=function(){e.$dispatch("menu-click",{action:n,data:o.original,node:o,jstree:t})}};for(var r in i)s(r);return i}},plugins:["search","contextmenu"]}).jstree()},watch:{keyword:function(e){this.jstree.search(e)},data:function(e){this.jstree.settings.core.data=e,this.jstree.refresh(!0)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={methods:{focus:function(){}}}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(135),s=n(i);t["default"]={props:{gutterSize:Number},components:{},ready:function(){(0,s["default"])([this.$els.top,this.$els.bottom],{sizes:[80,20],direction:"vertical",gutterSize:this.gutterSize,cursor:"row-resize"}),(0,s["default"])([this.$els.topLeft,this.$els.topRight],{sizes:[25,75],gutterSize:this.gutterSize,cursor:"col-resize"})}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports="<x-frame :content=currentView :gutter-size=5> <menu slot=menu :model=mainMenu @menu-click=mainMenuClick></menu> <tree class=border slot=left :menu=treeMenu.data :data=window.explorer.data @menu-click=treeMenuClick @item-dblclick=treeItemDblClick></tree> <router-view slot=right v-ref:router-view @save=onSave></router-view> <console slot=bottom :id=\"'hugo'\"></console> <state slot=state></state> </x-frame>"},function(e,t){e.exports="<div style=height:100% @keydown.s=onSave> <textarea v-el:codemirror></textarea> </div>"},function(e,t){e.exports='<div style="height: 100%; display: flex; align-items: center"> <p style="width: 100%;text-align: center;color: grey">No File Opened.</p> </div>'},function(e,t){e.exports='<div class=menu-container> <div v-for="menu in model" class=top-menu-item style="display: inline-block" :data-index=$index>{{menu.name}}</div> </div>'},function(e,t){e.exports="State"},function(e,t){e.exports='<div class="flex v-flex fill"> <div class=flex> <div style="padding: 2px">搜索</div> <input style="-webkit-flex: 1;min-width: 30px" v-model=keyword /> </div> <div class=flex-box> <div class="flex-ctrl margin-s"> <div class=flex-content> <div v-el:jstree></div> </div> </div> </div> </div>'},function(e,t){e.exports='<div style="height: 100%; display: flex; align-items: center"> <p style="width: 100%;text-align: center;color: grey">Unknown File.</p> </div>'},function(e,t){e.exports='<div class="flex v-flex fill"> <slot name=menu></slot> <div class=flex-box> <div class=flex-ctrl> <div class=flex-content> <div v-el:top class="top split"> <div v-el:top-left class="split split-horizontal"> <div class="flex-box v-flex"> <div class="flex-ctrl margin-s"> <div class=flex-content> <slot name=left></slot> </div> </div> </div> </div> <div v-el:top-right class="split split-horizontal"> <div class="flex-box v-flex"> <div class=flex-ctrl> <div class=flex-content> <slot name=right></slot> </div> </div> </div> </div> </div> <div v-el:bottom class=split> <div class="flex v-flex fill"> <div class=flex-box> <div class="flex-ctrl margin-s"> <div class=flex-content> <slot name=bottom></slot> </div> </div> </div> </div> </div> </div> </div> </div> <slot name=state></slot> </div>'},function(e,t){e.exports='<div class="flex v-flex fill" _v-3214bd20=""> <div handle=.drag-handle style="overflow-x: scroll" _v-3214bd20=""> <div v-for="item in editor.data" class=drag-handle _v-3214bd20=""> <div @click=switchTo($index) :class="(editor.selected[0]===$index)?\'tab tab-selected\':\'tab\'" _v-3214bd20=""> {{item.title}} <span v-if=isChange(item) _v-3214bd20="">*</span> <span class=btn-close @click=close($index) _v-3214bd20="">X</span> </div> </div> </div> <div class=flex-box _v-3214bd20=""> <div class="flex-ctrl margin-s" _v-3214bd20=""> <div class=flex-content _v-3214bd20=""> <component :is=currentView :data=editor.data[editor.selected[0]] v-ref:content="" _v-3214bd20=""></component> </div> </div> </div> </div>'},function(e,t){e.exports='<div class="flex v-flex fill" _v-79897438=""> <div class=flex-box _v-79897438=""> <div class=flex-ctrl style="border: 1px lightgray solid" _v-79897438=""> <div v-el:container="" class="flex-content console" _v-79897438=""> <pre v-el:content="" _v-79897438=""></pre> </div> </div> </div> </div>'},,function(e,t,o){var n,i;o(95),n=o(57),i=o(144),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},function(e,t,o){var n,i;o(96),n=o(58),i=o(145),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},function(e,t,o){var n,i;o(104),n=o(59),i=o(153),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},function(e,t,o){var n,i;o(103),n=o(60),i=o(152),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},function(e,t,o){var n,i;o(97),n=o(61),i=o(146),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},function(e,t,o){var n,i;o(98),n=o(62),i=o(147),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},function(e,t,o){var n,i;o(99),n=o(63),i=o(148),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},function(e,t,o){var n,i;o(100),n=o(64),i=o(149),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},function(e,t,o){var n,i;o(101),n=o(65),i=o(150),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},function(e,t,o){var n,i;o(102),n=o(66),i=o(151),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports["default"]),i&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=i)},,,,,,,function(e,t){}]);